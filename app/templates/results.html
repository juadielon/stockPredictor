<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Stock Predictor - Results</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Stylesheets -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />

    <!-- Scripts -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="container">
      <h1>Stock Predictor - Results</h1>
      <p>
        Forecasting stock prices of <b>{{ ticker}}</b> for the next
        <b>{{ days }}</b> days.
      </p>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Date (ds)</th>
            <th scope="col">Predicted price (yhat)</th>
            <th scope="col">yhat lower</th>
            <th scope="col">yhat upper</th>
          </tr>
        </thead>
        <tbody>
          {% for row in forecast %}
          <tr>
            <td>{{ row.ds.strftime('%d/%m/%Y') }}</td>
            <td>{{ row.yhat|round(4) }}</td>
            <td>{{ row.yhat_lower|round(4) }}</td>
            <td>{{ row.yhat_upper|round(4) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="container">
      <div class="row">
        <img
          src="{{ fig_paths.price }}"
          class="img-fluid"
          alt="Price {{ ticker }}"
        />
      </div>
      <div class="row">
        <img
          src="{{ fig_paths.forecast }}"
          class="img-fluid"
          alt="Forecast {{ ticker }}"
        />
      </div>
      <div class="row">
        <img
          src="{{ fig_paths.components }}"
          class="img-fluid"
          alt="Components {{ ticker }}"
        />
      </div>
    </div>

    <div class="container">
      <h2>Performance</h2>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">horizon</th>
            <th scope="col">mse</th>
            <th scope="col">rmse</th>
            <th scope="col">mae</th>
            <th scope="col">mape</th>
            <th scope="col">mdape</th>
            <th scope="col">coverage</th>
          </tr>
        </thead>
        <tbody>
          {% for row in performance %}
          <tr>
            <td>{{ (row.horizon|string)[:-9] }}</td>
            <td>{{ row.mse|round(4) }}</td>
            <td>{{ row.rmse|round(4) }}</td>
            <td>{{ row.mae|round(4) }}</td>
            <td>{{ row.mape|round(4) }}</td>
            <td>{{ row.mdape|round(4) }}</td>
            <td>{{ row.coverage|round(4) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </body>
</html>
